---
import type { ValidContentEntrySlug } from "astro:content";
import ItemOverview from "./ItemOverview.astro";
import ScopeBlock from "./ScopeBlock.astro";
import Keyword from "./syntax/Keyword.astro";
import Module from "./syntax/Module.astro";
import { getCollection } from "astro:content";

interface Props {
    /** The module's slug */
    module: ValidContentEntrySlug<'glossary'>;
}

const { module } = Astro.props;
const items = await getCollection('glossary', (entry) => entry.slug.match(RegExp(`^${module}/[^/]+$`)));
---

<h2><Keyword tkn="module"/> <Module tkn={module}/></h2>
<ScopeBlock>
    <ul class="glossary-list">
        {items.map((item) => <li><ItemOverview item={item}/></li>)}
    </ul>
</ScopeBlock>
